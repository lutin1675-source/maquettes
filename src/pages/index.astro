---
import Layout from '../layouts/Layout.astro';
import SiteChrome from '../components/SiteChrome.astro';
import { getAllModels } from '../lib/models';

const models = getAllModels();
const base = import.meta.env.BASE_URL || '/';
const featuredModel = models[0];
const methodology = [
	{
		title: 'Historique vérifié',
		copy:
			'Nous recoupons archives constructeur, rapports d’exploitants et dossiers IPMS pour valider les dates, sous-versions et livrées.',
	},
	{
		title: 'Sourcing matériel',
		copy:
			'Peintures, apprêts et consommables sont listés avec références FS/RAL et équivalences commercialisées en France/UE.',
	},
	{
		title: 'Visuels de référence',
		copy:
			'Walkarounds officiels, photos spotters sous licence et plans permettent de placer chaque antenne, correction ou patine.',
	},
	{
		title: 'Conseils atelier',
		copy:
			'Les retours de montage (clubs, concours, forums) sont synthétisés en checklists pour anticiper ajustements et séquences de peinture.',
	},
];
const heroVisual = 'https://images.unsplash.com/photo-1476610182048-b716b8518aae?auto=format&fit=crop&w=1200&q=80';
const referenceShots = [
	{
		title: 'Boeing 737 NG',
		subtitle: 'Walkaround Istanbul',
		image: 'https://images.unsplash.com/photo-1467951591042-f388365db261?auto=format&fit=crop&w=1200&q=80',
	},
	{
		title: 'Airbus A320neo',
		subtitle: 'Line check Europe',
		image: 'https://images.unsplash.com/photo-1500375592092-40eb2168fd21?auto=format&fit=crop&w=1200&q=80',
	},
	{
		title: 'Atelier résine',
		subtitle: 'Corrections fuselage',
		image: 'https://images.unsplash.com/photo-1489515217757-5fd1be406fef?auto=format&fit=crop&w=1200&q=80',
	},
];
---

<Layout title="Toton Maquette" description="Catalogue documenté de maquettes statiques.">
	<SiteChrome className="space-y-12">
		<section class="grid gap-6 lg:grid-cols-[minmax(0,1.8fr)_minmax(0,1fr)]">
			<article class="tm-panel tm-hero-panel rounded-xl p-8">
				<p class="section-label text-[var(--tm-lagoon)]">Observatoire Toton</p>
				<h1 class="mt-4 text-4xl leading-tight lg:text-5xl">
					Briefings techniques prêts à l’emploi pour maquettistes exigeants
				</h1>
				<p class="mt-6 text-base text-[var(--tm-muted)]">
					Chaque fiche compile historique, inventaire matériel, visuels de référence et gestes atelier. Les sources sont vérifiées auprès des constructeurs,
					des centres IPMS et des réseaux de clubs avant publication pour garantir des montages rigoureux.
				</p>
				<div class="mt-8 flex flex-wrap items-center gap-4 text-[0.7rem] font-semibold uppercase tracking-[0.35em] text-[var(--tm-muted)]">
					<a
						class="inline-flex items-center gap-2 rounded-full bg-[var(--tm-lagoon)] px-8 py-3 text-slate-950 shadow-[0_10px_22px_rgba(43,217,197,0.3)]"
						href={`${base}models/`}
					>
						Consulter le catalogue
					</a>
					<span>Catalogue mis à jour à chaque montage</span>
				</div>
			</article>

			{featuredModel ? (
				<aside class="tm-panel flex flex-col justify-between rounded-xl p-7">
					<div>
						<p class="brand-pill text-[var(--tm-lumen)]/70">Fiche en avant</p>
						<h2 class="mt-4 text-3xl leading-tight">{featuredModel.modelName}</h2>
						{featuredModel.reference && (
							<p class="mt-2 text-sm uppercase tracking-[0.35em] text-[var(--tm-muted)]">Référence {featuredModel.reference}</p>
						)}
						<p class="mt-4 text-[var(--tm-muted)]">
							{featuredModel.summary || `Consulte la fiche pour découvrir l’intégralité des ressources.`}
						</p>
					</div>
					<div>
						<figure class="mt-6 overflow-hidden rounded-lg border border-white/10">
							<img src={heroVisual} alt="Visuel de référence avion civil" loading="lazy" />
							<figcaption class="bg-black/60 px-4 py-2 text-xs uppercase tracking-[0.4em]">Visuel repère 2026</figcaption>
						</figure>
						<a
							class="mt-6 inline-flex w-full items-center justify-center rounded-full border border-white/40 px-6 py-3 text-xs font-semibold uppercase tracking-[0.4em]"
							href={`${base}models/${featuredModel.slug}/`}
						>
							Ouvrir la fiche
						</a>
					</div>
				</aside>
			) : null}
		</section>

		<section class="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
			{methodology.map((item) => (
				<article class="tm-panel rounded-xl p-6">
					<p class="section-label text-[var(--tm-lagoon)]/80">{item.title}</p>
					<p class="mt-3 text-[var(--tm-muted)]">{item.copy}</p>
				</article>
			))}
		</section>

		<section class="space-y-6">
			<div class="flex flex-wrap items-end justify-between gap-4">
				<div>
					<p class="section-label">Catalogue disponible</p>
					<h2 class="text-3xl leading-tight">Fiches prêtes à l’emploi</h2>
					<p class="text-[var(--tm-muted)]">Les références s’ajoutent au fil des montages en cours.</p>
				</div>
				<a
					class="inline-flex items-center gap-2 rounded-full border border-white/30 px-5 py-2 text-xs uppercase tracking-[0.35em] text-[var(--tm-muted)] hover:text-[var(--tm-lumen)]"
					href="mailto:bonjour@toton-maquette.com"
				>
					Proposer une maquette
				</a>
			</div>
			<div class="card-grid">
				{models.map((model) => (
					<article class="tm-panel flex flex-col rounded-xl p-6">
						<div class="space-y-2">
							<p class="text-xs font-semibold uppercase tracking-[0.3em] text-[var(--tm-muted)]">
								{model.manufacturer || 'Toton Maquette'}
							</p>
							<h3 class="text-2xl">{model.modelName}</h3>
							{model.reference && <p class="text-sm text-[var(--tm-muted)]">Référence {model.reference}</p>}
							<p class="text-[var(--tm-muted)]">{model.summary || 'Consulte la fiche pour découvrir le contenu complet.'}</p>
						</div>
						<a
							class="mt-6 inline-flex items-center justify-between rounded-full border border-white/10 px-4 py-2 text-xs uppercase tracking-[0.35em] text-[var(--tm-muted)] hover:text-[var(--tm-lumen)]"
							href={`${base}models/${model.slug}/`}
						>
							<span>{model.docs.length} sections documentées</span>
							<span class="text-[var(--tm-lagoon)]">→</span>
						</a>
					</article>
				))}
			</div>
		</section>

		<section class="space-y-6">
			<div>
				<p class="section-label text-[var(--tm-lagoon)]">Visuels en observation</p>
				<h2 class="text-3xl leading-tight">Moodboard atelier</h2>
				<p class="text-[var(--tm-muted)]">
					Images temporaires issues de banques libres pour cadrer les ambiances : elles seront remplacées par nos photos de montage et nos walkarounds propriétaires.
				</p>
			</div>
			<div class="tm-gallery">
				{referenceShots.map((shot) => (
					<figure>
						<img src={shot.image} alt={`${shot.title} – ${shot.subtitle}`} loading="lazy" />
						<figcaption>{shot.title} – {shot.subtitle}</figcaption>
					</figure>
				))}
			</div>
		</section>

		<section class="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
			<div class="tm-panel rounded-xl p-8">
				<p class="section-label">Mode opératoire</p>
				<h2 class="mt-3 text-3xl">Comment nous montons une fiche</h2>
				<ul class="mt-6 space-y-3 text-[var(--tm-muted)]">
					<li>
						<strong>1.</strong> Repérage des sources (constructeurs, walkarounds, retours concours, archives compagnies).
					</li>
					<li>
						<strong>2.</strong> Saisie des cinq volets (historique, matériel, visuels, tips, synthèse atelier).
					</li>
					<li>
						<strong>3.</strong> Vérification croisée des teintes, antennes, corrections et options.
					</li>
					<li>
						<strong>4.</strong> Relecture éditoriale et publication, suivie des retours clubs/IPMS.
					</li>
				</ul>
			</div>
			<div class="rounded-xl border border-white/10 bg-[radial-gradient(circle_at_top,#31216b,#120d26)] p-8">
				<p class="section-label">Accompagnement</p>
				<h2 class="mt-3 text-3xl">Besoin d’un dossier spécifique ?</h2>
				<p class="mt-4 text-[var(--tm-muted)]">
					Nous priorisons les fiches selon les demandes de la communauté. Partage tes besoins (compagnie, version, échelle) et nous
					répondrons avec un plan de documentation précis.
				</p>
				<a
					class="mt-6 inline-flex rounded-full bg-[var(--tm-coral)] px-6 py-3 text-xs font-semibold uppercase tracking-[0.4em] text-slate-950 shadow-[0_10px_22px_rgba(255,143,101,0.3)]"
					href="mailto:bonjour@toton-maquette.com"
				>
					Demander une fiche
				</a>
			</div>
		</section>
	</SiteChrome>
</Layout>
